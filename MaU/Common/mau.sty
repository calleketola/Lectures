% Requires the packages:
% listings
% xcolor

\ProvidesPackage{mau}

% Ladda grundtemat
\usetheme{malmoe}
\usefonttheme{serif}
\useinnertheme{default}



% Färgdefinitioner
\definecolor{malmo-red}{RGB}{228,3,46}

% Secondary colours
%% Pinks
\definecolor{malmo-pink-darker}{RGB}{169,17,97}
\definecolor{malmo-pink-dark}{RGB}{233,106,164}
\definecolor{malmo-pink-light}{RGB}{245,188,216}
\definecolor{malmo-pink-lighter}{RGB}{251,224,238}
%% Turquises
\definecolor{malmo-turquoise-darker}{RGB}{2,97,91}
\definecolor{malmo-turquoise-dark}{RGB}{0,174,162}
\definecolor{malmo-turquoise-light}{RGB}{152,209,201}
\definecolor{malmo-turquoise-lighter}{RGB}{225,241,239}
%% Blues
\definecolor{malmo-blue-darker}{RGB}{30,69,137}
\definecolor{malmo-blue-dark}{RGB}{145,151,194}
\definecolor{malmo-blue-light}{RGB}{177,193,223}
%% Purples
\definecolor{malmo-purple-darker}{RGB}{69,55,119}
\definecolor{malmo-purple-dark}{RGB}{150,142,184}
\definecolor{malmo-purple-light}{RGB}{200,195,220}
%% Greens
\definecolor{malmo-green-dark}{RGB}{85,173,75}
\definecolor{malmo-green-light}{RGB}{182,214,167}
\definecolor{malmo-green-lighter}{RGB}{222,236,213}
%% Oranges
\definecolor{malmo-orange-dark}{RGB}{239,119,72}
\definecolor{malmo-orange-light}{RGB}{249,192,163}
\definecolor{malmo-orange-lighter}{RGB}{252,224,210}
%% Yellows
\definecolor{malmo-yellow-dark}{RGB}{255,224,0}
\definecolor{malmo-yellow-light}{RGB}{255,236,131}
\definecolor{malmo-yellow-lighter}{RGB}{255,247,208}

% Grundfärger
\setbeamercolor{title}{bg=white, fg=black}
\setbeamercolor{author}{bg=white, fg=black}
\setbeamercolor{institute}{bg=white, fg=black}
\setbeamercolor{date}{bg=white, fg=black}
\setbeamercolor{palette primary}{bg=malmo-red, fg=white}
\setbeamercolor{palette quaternary}{bg=malmo-red, fg=white}
\setbeamercolor{background canvas}{bg=malmo-yellow-light, fg=black}
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{structure}{fg=black}

\setbeamercolor{normal text}{fg=black, bg=malmo-yellow-lighter}

\newcommand{\textbox}[1]{
    \begin{beamercolorbox}[wd=\textwidth, sep=0.75em]{normal text}
        #1
    \end{beamercolorbox}
}

% Lägg till separator under navigering
\addtobeamertemplate{headline}{}{
    \leavevmode
 
    \vskip-3.5em % Justera så att logotypen hamnar i nivå med navigeringen
    
    \hbox{%
        \includegraphics[height=3em]{../../../Common/mau-logga-neg.png}\hspace{1em}%
    }
    \vskip0.5em
    \begin{beamercolorbox}[wd=\paperwidth,ht=0.5em]{myseparator}
    \end{beamercolorbox}
}

\AtBeginDocument{
  \setbeamercolor{myseparator}{bg=malmo-yellow-light}
  \lstset{literate=
  {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
  {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
  {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
  {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
  {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
  {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
  {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
  {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
  {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
  {ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
  {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
  {€}{{\euro}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
  {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}

{  % Title page
    \setbeamertemplate{headline}{}
    \setbeamertemplate{footline}{}
    \setbeamercolor{palette primary}{bg=malmo-red, fg=white}
    \setbeamercolor{background canvas}{bg=malmo-red, fg=black}
    %\begin{frame}
    %    \titlepage
    %\end{frame}
    \maketitle
}
}

% Sektioner med olika bakgrundsfärger
\newcounter{section-number}
\AtBeginSection[]{
    \stepcounter{section-number}
    \ifnum\value{section-number}=1
        \setbeamercolor{background canvas}{bg=malmo-yellow-light}
        \setbeamercolor{myseparator}{bg=malmo-yellow-lighter}
        \setbeamercolor{normal text}{bg=malmo-yellow-lighter}

    \fi
    \ifnum\value{section-number}=2
        \setbeamercolor{background canvas}{bg=malmo-orange-light}
        \setbeamercolor{myseparator}{bg=malmo-orange-lighter}
        \setbeamercolor{normal text}{bg=malmo-orange-lighter}
    \fi
    \ifnum\value{section-number}=3
        \setbeamercolor{background canvas}{bg=malmo-turquoise-light}
        \setbeamercolor{myseparator}{bg=malmo-turquoise-lighter}
        \setbeamercolor{normal text}{bg=malmo-turquoise-lighter}
    \fi
    \ifnum\value{section-number}=4
        \setbeamercolor{background canvas}{bg=malmo-green-light}
        \setbeamercolor{myseparator}{bg=malmo-green-lighter}
        \setbeamercolor{normal text}{bg=malmo-green-lighter}
    \fi
    \ifnum\value{section-number}=5
        \setbeamercolor{background canvas}{bg=malmo-pink-light}
        \setbeamercolor{myseparator}{bg=malmo-pink-lighter}
        \setbeamercolor{normal text}{bg=malmo-pink-lighter}
    \fi

    \begin{frame}
    
        \vspace{7em}
        
        \textbox{\Large\textbf{\insertsection}}

        % Eftersom de osynliga sektionerna i 
        % innehållsförtekningen fortfarande 
        % tar plats behöver vi göra olika för 
        % varje avsnitt
        \ifnum\value{section-number}=1
            \vspace{-2.5em}
        \fi
        \ifnum\value{section-number}=2
            \vspace{-5em}
        \fi
        \ifnum\value{section-number}=3
            \vspace{-7.5em}
        \fi
        \ifnum\value{section-number}=4
            \vspace{-10em}
        \fi
        \ifnum\value{section-number}=5
            \vspace{-12.5em}
        \fi
        {   
            \setbeamertemplate{section in toc}{\vspace{-1.5em}\hspace{0em}}
            %\setbeamertemplate{subsection in toc}[default]
            \tableofcontents[currentsection, hideothersubsections]
        }
    \end{frame}
}


\definecolor{javared}{rgb}{0.6,0,0}       % keywords
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javablue}{rgb}{0.25,0.35,0.75} % strings
\definecolor{javagray}{rgb}{0.5,0.5,0.5}    % line numbers

% Java-inställningar
\lstdefinestyle{java}{
  language=Java,
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{javagreen}\itshape,
  stringstyle=\color{javared},
  numbers=left,
  numberstyle=\tiny\color{javagray},
  stepnumber=1,
  numbersep=10pt,
  backgroundcolor=\color{white},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=false,
  escapeinside={(*@}{@*)}, % för att kunna lägga in LaTeX i kod
  morekeywords={String},
}

% Python-inställningar
\lstdefinestyle{python}{
  language=Python,
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{orange},
  commentstyle=\color{gray}\itshape,
  numberstyle=\tiny\color{gray},
  backgroundcolor=\color{white},
  showstringspaces=false,
  breaklines=true,
  frame=single,
  rulecolor=\color{black},
  captionpos=b,
  numbers=left,
  numbersep=5pt,
  tabsize=4,
  morekeywords={self, None, True, False},
}